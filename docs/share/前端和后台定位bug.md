## 前端和后台定位bug

**后端的Bug，如何准确的定位问题在哪里，如何精准的描述Bug？**

（1）查看报错日志

 查看报错日志，通过日志分析，需要有一定的经验，并且有一定的代码基础，才能更好地定位问题。



（2）查看数据库的数据

 了解所测功能的数据表结构，测试过程中，查看数据库的数据，确认数据的正确性。



（3）查看缓存（如Memcache、apc、redis等缓存）是否正确

 





**现在来分析bug可能是前台还是后台：**



case1：文本框输入不合法的内容，点击提交按钮， 如果不合法的内容提交成功， 那应该是前后台没有做校验， 前后台都有这个bug



case2：文本框输入合法的内容，点击提交按钮， 查看数据库中的数据和输入的内容不一致， 这个时候需要看前台传的数据是否正确，使用fiddler抓包， 查看请求头里面的数据是否和输入一致，如果一致就是后台的问题， 如果不一致，就是前台的bug



case3：界面展示不友好， 重复提交 这些都是前台的bug



**前台定位方法：**



前台bug定位：按F12在console中查看报错信息，对于出错的js可以在Sources下查看对应报错的资源文件，写入禅道提交给开发即可



前台bug注意以下三个方面：

（1）网站前台的权限控制：没有权限的用户是不能直接输入url的方式来进行访问的，必须进行登录。以后涉及到权限的测试，一定不能漏掉url的方式也需要验证一下。而在单个页面进行W3C测试时则需要去掉该权限控制。



（2）网站前台的title，对于这个也很容易忽视。进入到不同的功能页面，title显示应该是有，并且要和你进入的页面一致。title就是在浏览器最左上角看到的那些文字



（3）http和https的注意点：https是一种安全链接，它是需要证书的，而http就是普通链接，所以在你的系统中客户会要求某些关键的地方希望加上这种安全连接，那么此时你需要注意的是，对于不需要的安全链接的地方千万也要去重点测试，有些开发会很容易忽略这一点。



你要打开HTTPS开头的网站，前提是该网站安装了SSL证书，只有安装了SSL证书的网站，并且开启了443端口，你才可以通过HTTPS加密协议无访问。如果没有则不能访问。



你可要测试，比如在某个网站http协议后面加个s去访问，看能否访问成功，能成功，会显示绿色安全小锁，否则就不能访问。给你举几个安装了ssl证书，可要https访问的网站，1号店，天猫，淘宝，支付宝，百度，沃通CA，工信部网站等等



**前端bug主要分为3个类别：****HTML,CSS,Javascript三类问题**



给个最大的区别方式方法：

出现样式的问题基本都是CSS的bug

出现文本的问题基本都是html的bug

出现交互类的问题基本都是Javascript的bug

现在以淘宝的前端人员工作为例进行相关bug定位的剖析



**判断前后台问题的区分方法：**



F12, 打开错误控制台console



区分前后台交互：查看网络请求

a) Html中如果有链接，有相应的情况下，基本可以定位到是属于前端的问题



b) 如果为空，或者有出现error错误信息，我们就可以定位到属于后台开发的问题



TMS对应的VM模板，出现的一些截断控制，转换功能都属于前端的问题



一、HTML



最常见的HTML的问题—就是标签的问题了，最常见的排查和解决办法就是查看页面源代码，然后通过检查标签的工具，现在暂时提供idea.exe进行检查，有其他更好的工具再进行推荐。



常见问题类别：



标签闭合—表象，页面中出现大范围的混乱，就是少了标签的情况，导致标签未闭合



标签浮出—例如鼠标移动到文本位置，浮出全名的这种浮出形式都属于标签浮出的问题



标签在不同的浏览器的一种解析方式的不同导致的前端bug例如如下结构



该部分可以看做为一个大的框即是标签<a> 内嵌标题的标签<p>，里面再有这些个内容<ing>,那么在不同的浏览器中，可能ie和FF的解析会产生不同，假设IE解析为<a><p><ing></ing></a></p>的一种形式，但在FF下可能解析为



<a><ing></ing></a>



<p></p>



的两行的形式从而导致前端在复古鞋/板鞋这块ing里面的格式产生混乱



结构可看为：



页面定点的问题：最明显的前端功能，在于点击某个链接将页面位置定位到对应的位置



a) 我们可以通过右键，查看元素的工具进行定位到毛点所定位到的位置，如果出现问题这种问题很直观，并且能通过这种方法直接定位到问题页面的跳转，也属于html的问题，大家在出现点击未跳转或者跳转方式不正确的问题，直接可以定位到跳转属性的问题，找到对应的跳转对应的块提供给开发人员即可



二、CSS，产生样式问题。例如：排版，布局，颜色，背景等



css的bug主要分为：兼容型bug 、业务性bug 和 内容型bug



兼容型bug

a) 表现：仅在少数几个浏览器上出现



b) 原因：浏览器的解析不一致



c) 解决：根据实际情况进行前端代码的通用性



d) 类别：



脚本兼容型问题：在出现对应交互的问题就基本可以定位到脚本兼容型bug，例如DIV的显示和层结构。实际可以参考聚划算的几个商品鼠标移动到小图的时候，对应大图展示的功能。



页面样式兼容型问题：直接表象在样式上，都是基于框架的页面展示错误，很容易定位业务性bug



a) 表现：在所有浏览器下都有该问题



b) 原因：对业务不熟悉



c) 解决：根据需求进行修改达到业务要求



该类型的定位，主要在和实现的要求不一致，最直接表现在页面的友好型，用户的可用性的bug，可以定位为该类型内容型bug



a) 表现： 前端自测正确，但在填入内容后，出现的错误，内容消失等



b) 原因： 扩展性未考虑周全



c) 解决： 进行overflow test



输入内容的长度限制等功能可定位为内容型bug



三、Javascript



最直接的判断方法，刷新页面，出现滞后显示的一些模块基本都为脚本的输出块。该部分的一些问题可以参照兼容型bug中类别的脚本兼容型bug。



有产生交互类的问题，大多数都可以定位到是属于javascript产生的问题，该部分大多不会报错有错误提示类的。页面左下方有出现javascript的错误提示；有弹出错误信息提示的bug；浏览器返回的一些错误弹出框都属于javascript的bug





　　**小知识：**



　　ps aux和ps -ef命令区别



　　ps aux 是用BSD的格式来显示java这个进程



显示的项目有：USER,PID,%CPU,%MEM,VSZ,RSS,TTY,STAT,START,TIME,COMMAND



　　ps -ef 是用标准的格式显示java这个进程



　　显示的项目有：UID,PID,PPID,C,STIME,TTY,TIME,CMD）



**如何查看日志？**



一台服务器可以部署多个应用：



　　cd usr/local/测试服务器名称/logs //查看先进入到服务器的logs目录下



　　tail -f catalina.out //监视catalina.out 文件的尾部内容（默认10行）





**日志中常见的问题**



获取日志文件中常遇到的问题：



　　1)编码问题：tomcat是新的，需要改编码 修改tomcat的server.xml文件<Connector port="8080" URIEncoding="UTF-8"/>



　　特别是windows下的项目重新部署到linux系统下，



　　2)空指针：程序问题，一般没有考虑到为空情况，或者主外键约束的数据为空，或者删除关联数据，导致为空



　　3)长度过长，超过最大长度，测试环境修改数据库字段长度后生产环境未修改，导致报错！！



　　4)非法数据：



​     5)内存溢出：重启

 



**5.一般的问题原因总结：**



　　程序：为空判断，增删改查,不同公众号调用的接口也不一样



　　数据初始化：数据库表结构和数据初始化，权限配置，



　　特别注意生产环境上的用户数据修改，此时用户在使用，很重要！！！



　　故障无法重现时：



　　1）看日志，根据日志定位原因，则在测试环境中按照日志提示构造条件相同的测试案例测试，尝试在测试环境中将问题重现。



　　2）测试环境和配置与实际的工程环境和配置有哪些差异等等。同时主动与开发负责人、工程实施人员以及有经验的项目经理讨论，分析可能导致的原因。



　　   测试环境ok，生产环境新增时保存失败，查看后台日志报长度溢出，数据库内容字段要求和生产环境不一致！！



**辅助工具：****linux和SQL**



　linux查看日志



　SQL用来筛选数据或直接进行数据修改状态，多用于集成测试过程中前后流程相连接